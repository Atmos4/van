let e,t,o,l=Object,r=l.getPrototypeOf,n=(e,t,o,l)=>(e??(setTimeout(o,l),new Set)).add(t),f={get val(){return this.t},set val(e){let o=this,l=o.t;if(e!==l){o.o===l?t=n(t,o,g):e===o.o&&t.delete(o),o.t=e;for(let t of o.l)t(e,l)}},onnew(e){this.l.push(e)}},s=r(f),d=e=>e.nodeType?e:new Text(e),i=(e,...t)=>{for(let o of t.flat(1/0))e.appendChild(r(o)===f?m(o,e=>e):d(o));return e},a={},u=(t,o)=>t?l.getOwnPropertyDescriptor(t,o)??u(r(t),o):e,_=new Proxy((e,...t)=>{let[o,...n]=r(t[0]??0)===s?t:[{},...t],d=document.createElement(e);for(let[t,n]of l.entries(o)){let o=(_=e,w=t,g=r(d),a[_+","+w]??(a[_+","+w]=u(g,w)?.set??0)?e=>d[t]=e:e=>d.setAttribute(t,e));r(n)===f?m(n,e=>(o(e),d)):r(n)===s?m(...n.deps,(...e)=>(o(n.f(...e)),d)):o(n)}var _,w,g;return i(d,...n)},{get:(t,o)=>t.bind(e,o)}),w=e=>e.i=e.i.filter(e=>e.u?.isConnected),g=()=>{let o=[...t];t=e;for(let t of new Set(o.flatMap(w))){let{_:o,u:l}=t,r=t.g(...o.map(e=>e.t),l,...o.map(e=>e.o));r!==l&&(r!=e?l.replaceWith(t.u=d(r)):(l.remove(),t.u=e))}for(let e of o)e.o=e.t},m=(...t)=>{let l=t.pop(),r=l(...t.map(e=>e.t));if(r==e)return[];let f={_:t,u:d(r),g:l};for(let l of t)o=n(o,l,()=>(o.forEach(w),o=e),1e3),l.i.push(f);return f.u};export default{add:i,tags:_,state:e=>({__proto__:f,t:e,o:e,i:[],l:[]}),bind:m};