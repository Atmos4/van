let e,t,o,l=Object,r=l.getPrototypeOf,n=document,f=(e,t,o,l)=>(e??(setTimeout(o,l),new Set)).add(t),s={get val(){return this.t},set val(e){let o=this,l=o.t;if(e!==l){o.o===l?t=f(t,o,m):e===o.o&&t.delete(o),o.t=e;for(let t of o.l)t(e,l)}},onnew(e){this.l.push(e)}},d=r(s),a=e=>e.nodeType?e:new Text(e),i=(e,...t)=>{for(let o of t.flat(1/0))e.appendChild(r(o)===s?p(o,e=>e):a(o));return e},u={},_=(t,o)=>t?l.getOwnPropertyDescriptor(t,o)??_(r(t),o):e,g=t=>new Proxy((e,...o)=>{let[f,...a]=r(o[0]??0)===d?o:[{},...o],g=t?n.createElementNS(t,e):n.createElement(e);for(let[t,o]of l.entries(f)){let l=(w=e,m=t,v=r(g),u[w+","+m]??(u[w+","+m]=_(v,m)?.set??0)?e=>g[t]=e:e=>g.setAttribute(t,e));r(o)===s?p(o,e=>(l(e),g)):r(o)===d?p(...o.deps,(...e)=>(l(o.f(...e)),g)):l(o)}var w,m,v;return i(g,...a)},{get:(t,o)=>t.bind(e,o)}),w=e=>e.i=e.i.filter(e=>e.u?.isConnected),m=()=>{let o=[...t];t=e;for(let t of new Set(o.flatMap(w))){let{_:o,u:l}=t,r=t.g(...o.map(e=>e.t),l,...o.map(e=>e.o));r!==l&&(r!=e?l.replaceWith(t.u=a(r)):(l.remove(),t.u=e))}for(let e of o)e.o=e.t},p=(...t)=>{let l=t.pop(),r=l(...t.map(e=>e.t));if(r==e)return[];let n={_:t,u:a(r),g:l};for(let l of t)o=f(o,l,()=>(o.forEach(w),o=e),1e3),l.i.push(n);return n.u};export default{add:i,tags:g(),tagsNS:g,state:e=>({__proto__:s,t:e,o:e,i:[],l:[]}),bind:p};