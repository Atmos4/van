{let e,t,l,o,r,f,n,s,a,i,d,u,w,g,v,_,h,S,c,m,V,b;f=(r=Object).getPrototypeOf,n=document,s=(e,t,l,o)=>(e??(setTimeout(l,o),new Set)).add(t),a=(e,t,o)=>{let r=l;l=t;let f=e(o);return l=r,f},d=f(i={get val(){return l?.add(this),this.t},get oldVal(){return l?.add(this),this.l},set val(e){let l=this;if(e!==l.t){t=s(t,l,V),l.t=e;let o=[...l.o=l.o.filter(e=>!e.i)];for(let e of o)h(e.f),e.i=1}}}),u=f(a),w=e=>f(e??0)===i,g=t=>t==e?e:t.nodeType?t:new Text(t),v=e=>e.u=e.u.filter(e=>e.g?.isConnected),_=(t,l)=>{let r=new Set,f={f:t,g:g(a(t,r,l))};for(let t of r)o=s(o,t,()=>(o.forEach(v),o=e),1e3),t.u.push(f);return f.g},h=e=>{let t=new Set,l={f:e};a(e,t);for(let e of t)e.o.push(l)},c={},m=t=>new Proxy((l,...o)=>{let[s,...a]=f(o[0]??0)===d?o:[{},...o],i=t?n.createElementNS(t,l):n.createElement(l);for(let[t,o]of r.entries(s)){let n=l=>l?r.getOwnPropertyDescriptor(l,t)??n(f(l)):e,s=l+","+t,a=c[s]??(c[s]=n(f(i))?.set??0),d=a?a.bind(i):i.setAttribute.bind(i,t);w(o)?_(()=>(d(o.val),i)):f(o??0)!==u||t.startsWith("on")&&!o.v?d(o):_(()=>(d(o()),i))}return S(i,...a)},{get:(t,l)=>t.bind(e,l)}),V=()=>{let l=[...t].filter(e=>e.t!==e.l);t=e;for(let t of new Set(l.flatMap(v))){let l=t.g,o=_(t.f,l);t.g=e,o!==l&&(o!=e?l.replaceWith(o):l.remove())}for(let e of l)e.l=e.t},b={add:S=(t,...l)=>{for(let o of l.flat(1/0)){let l=w(o)?_(()=>o.val):f(o??0)===u?_(o):g(o);l!=e&&t.appendChild(l)}return t},derive:e=>(e.v=1,e),tags:m(),tagsNS:m,state:e=>({__proto__:i,t:e,l:e,u:[],o:[]}),val:e=>w(e)?e.val:e,oldVal:e=>w(e)?e.oldVal:e,effect:h},window.van=b;}